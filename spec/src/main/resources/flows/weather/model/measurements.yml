relations:
  measurements:
    kind: file
    format: parquet
    location: "$basedir/measurements/"
    pattern: "${year}"
    partitions:
      - name: year
        type: integer
        granularity: 1
    schema:
      kind: avro
      file: "${project.basedir}/schema/measurements.avsc"

  measurements_jdbc:
    kind: jdbc
    connection: sql_server
    database: dbo
    table: measurement
    properties:
      numPartitions: 1
    schema:
      kind: spark
      file: "${project.basedir}/schema/measurements.json"
    primaryKey:
      - usaf
      - wban
      - date
      - time
